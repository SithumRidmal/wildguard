<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Animal AI Detection</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-900 text-slate-100 min-h-screen">

<div class="max-w-4xl mx-auto px-4 py-6">

  <h1 class="text-3xl font-bold text-center mb-6">ğŸ¾ Animal AI Detection</h1>

  <!-- Navigation -->
  <div class="flex justify-center gap-4 mb-8">
    <a href="#camera" class="px-4 py-2 bg-blue-600 rounded-xl hover:bg-blue-700">
      ğŸ“· Real-Time
    </a>
    <a href="#upload" class="px-4 py-2 bg-emerald-600 rounded-xl hover:bg-emerald-700">
      ğŸ–¼ Upload
    </a>
  </div>

  <!-- CAMERA -->
  <section id="camera" class="bg-slate-800 p-4 rounded-2xl shadow mb-10">
    <h2 class="text-xl text-center font-semibold mb-4">Live Camera</h2>

    <video id="video"
           autoplay muted
           class="rounded-xl w-full max-h-[420px] object-cover bg-black"></video>

    <canvas id="canvas" width="224" height="224" class="hidden"></canvas>

    <div id="results" class="mt-4 space-y-3"></div>
  </section>

  <!-- UPLOAD -->
  <section id="upload" class="bg-slate-800 p-4 rounded-2xl shadow">
    <h2 class="text-xl text-center font-semibold mb-4">Upload Image</h2>

    <input type="file" id="fileInput"
      class="block w-full text-sm text-slate-300
             file:mr-4 file:py-2 file:px-4
             file:rounded-xl file:border-0
             file:bg-blue-600 file:text-white
             hover:file:bg-blue-700">

    <button onclick="uploadImage()"
      class="mt-4 w-full bg-blue-600 py-2 rounded-xl hover:bg-blue-700">
      Predict Image
    </button>

    <div id="uploadResults" class="mt-4 space-y-2"></div>
  </section>

</div>

<script src="/static/js/camera.js"></script>

<script>
async function uploadImage() {
  const file = document.getElementById("fileInput").files[0];
  if (!file) return;

  const fd = new FormData();
  fd.append("image", file);

  const res = await fetch("/predict", { method: "POST", body: fd });
  const data = await res.json();

  document.getElementById("uploadResults").innerHTML =
    data.predictions.map(p => `
      <div class="bg-slate-700 p-3 rounded-xl">
        <div class="flex justify-between text-sm">
          <span>${p.label}</span>
          <span>${p.confidence}%</span>
        </div>
        <div class="w-full bg-slate-600 h-2 rounded-full mt-2">
          <div class="bg-emerald-500 h-2 rounded-full"
               style="width:${p.confidence}%"></div>
        </div>
      </div>
    `).join("");
}
</script>

</body>
</html>
